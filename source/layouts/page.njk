{% extends "./base.njk" %}

{% block header %}
  <nav class="banner">
    <ul>
      {% for item in globalNavigation %}
        <li class="{{ item.id }}" class="banner__navigation-item"><a class="banner__navigation-link" href="{{ item.href }}"{% if page.navigationId == item.id %} aria-current="page"{% endif %}>{{ item.title }}</a></li>
      {% endfor %}
    </ul>
  </nav>
{% endblock %}

{% block content %}
  <h1>{{ title }}</h1>
  {{ content | safe }}
  {% if photo %}
    {% for p in photo %}
      {% figure p.url, p.alt %}
    {% endfor %}
  {% endif %}
{% endblock %}

{% if page.collectionId == 'diary' or page.collectionId == 'articles' %}
  {% set count = 0 %}
  {% set prevPost = null %}
  {% set nextPost = null %}
  {%- for post in collections[page.collectionId] -%}
    {% if post.url == page.url %}
      {% set prevPost = collections[page.collectionId][count + 1] %}
      {% set nextPost = collections[page.collectionId][count - 1] %}
    {% endif %}
    {% set count = count + 1 %}
  {%- endfor -%}

{% block pageNavigation %}
  <nav aria-label="tags">
    <ul>
      {% for tag in tags %}
        <li><a href="/tags/{{ tag | slug }}" rel="tag">{{ tag }}</a></li>
      {% endfor %}
    </ul>
  </nav>
  <nav aria-label="pagination">
    <ul>
      {% if prevPost %}<li>Previous {{ type.title }}: <a href="{{ prevPost.url }}" rel="prev">{{ prevPost.data.title }}</a></li>{% endif %}
      {% if nextPost %}<li>Next {{ type.title }}: <a href="{{ nextPost.url }}" rel="next">{{ nextPost.data.title }}</a></li>{% endif %}
    </ul>
  </nav>
{% endblock %}
{% endif %}

{% block footer %}
  <p>&copy; Copyright Jon Roobottom</p>
{% endblock %}